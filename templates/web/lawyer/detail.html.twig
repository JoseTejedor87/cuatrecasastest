{% extends 'web/base.html.twig' %}

{% block main %}

    <main role="main" class="lawyer__page">
        <article>

            <header class="container">
                <div class="row lawyer__page__header">
                    <div class="col-md-7 lawyer__page__content">
                        <a href="{{ path('lawyers_index') }}" class="back__button">{{ 'global.goBack'|trans }}</a>
                        <h1 class="lawyer__page__name">
                            {{ lawyer.fullName }}
                        </h1>
                        <h2 class="lawyer__page__position">
                            {{ ('sections.lawyers.lawyerCategoryTypes.' ~ lawyer.lawyerType) | trans }}
                        </h2>
                        <ul class="lawyer__page__scope related__services">
                            {% for activity in lawyer.activities %}
                            <li class="related__services__item">
                                <a href="{{ navigation_service.getPathByPublishable(activity)}}" class="related__services__link">
                                    {{ activity.translate(app.request.getLocale()).title}}
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                        <div class="lawyer__page__contact">
                            <div data-address>
                                {{ 'sections.lawyers.office'|trans }} {{ lawyer.office ? lawyer.office.city : '' }}
                            </div>
                            <div data-telephone>
                                {{ lawyer.phone }}
                            </div>
                            <div data-email>
                                <a href="mailto:{{ lawyer.email }}">
                                    {{ lawyer.email }}
                                </a>
                            </div>
                        </div>
                        <div class="lawyer__page__more">
                        {% if lawyer.knownLanguages|length > 0 %}
                            <div data-langs>
                            {% for language in lawyer.knownLanguages %}
                                <span>{{ ('global.languages.'~language)|trans }}</span>
                            {% endfor %}
                            </div>
                        {% endif %}
                            <div data-vcard>
                                <a href="#">{{ 'sections.lawyers.vcard'|trans }}</a>
                            </div>
                            <div data-cv>
                                <a href="#">{{ 'sections.lawyers.full_cv'|trans }}</a>
                            </div>
                        </div>
                        <ul class="action__links">
                            <li><a href="#"><i class="material-icons">share</i></a></li>
                            <li><a href="#"><i class="material-icons">print</i></a></li>
                            <li><a href="#"><i class="material-icons">bookmark_border</i></a></li>
                        </ul>
                    </div>
                    <div class="col-md-5">
                        <div class="lawyer__page__media">
                            {% if lawyer.photo %}
                                <figure style="background-image: url('{{ asset('/resources/' ~ lawyer.photo.fileName)| imagine_filter('lawyers_header') }}');" />
                            {% endif %}
                        </div>
                    </div>
                </div>
            </header>

            <div class="container">

                <section class="row page__block--full">
                    <div class="col">
                        <div class="page__block__content--full">
                            {{ lawyer.translate(app.request.getLocale()).description|raw  }}
                        </div>
                    </div>
                </section>

                <section class="row page__block--aside">
                    <div class="col">
                        <div class="page__block__content">
                            {{ lawyer.translate(app.request.getLocale()).curriculum|raw  }}
                        </div>

                        <div class="page__block__aside">
                            {% if lawyer.secondaryActivities|length > 0 %}
                                <div class="page__aside">
                                    <h3 class="page__aside__title">{{ 'sections.lawyers.specialties'|trans }}</h3>
                                    <ul class="page__aside__list--specialties">
                                    {% for activity in lawyer.secondaryActivities %}
                                        <li>
                                            <a href="{{ navigation_service.getPathByPublishable(activity)}}">
                                                {{ activity.translate(app.request.getLocale()).title}}
                                            </a>
                                        </li>
                                    {% endfor %}
                                    </ul>
                                </div>
                            {% endif %}

                            {% if (lawyer.trainings|length > 0) or (lawyer.mentions|length > 0) %}
                                <div class="page__aside">
                                    {% if lawyer.trainings|length > 0 %}
                                        <h3 class="page__aside__title">{{ 'sections.lawyers.training'|trans }}</h3>
                                        <ul class="page__aside__list--career">
                                            {% for training in lawyer.trainings %}
                                                <li>
                                                    {{ training.translate(app.request.getLocale()).description | raw}}
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    {% endif %}
                                    {% if lawyer.mentions|length > 0 %}
                                        <h3 class="page__aside__title">{{ 'sections.lawyers.mentions'|trans }}</h3>
                                        <ul class="page__aside__list--career">
                                            {% for mention in lawyer.mentions %}
                                                <li>
                                                    {{ mention.translate(app.request.getLocale()).description | raw}}
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    {% endif %}
                                </div>
                            {% endif %}
                        </div>

                    </div>
                </section>

                {% if contextualBlocks.cases|length > 0 %}
                    <section class="row page__block">
                        <div class="col">
                            <div class="page__block__title">
                                <h3 class="subsection__title">{{ 'sections.lawyers.cases'|trans }}</h3>
                            </div>
                            <div class="page__block__content">
                                <ul class="page__block__content__details">
                                    {% for case in contextualBlocks.cases %}
                                        <li>
                                            <div>***</div>
                                            <a href="{{ path('case_studies_detail', {slug: case.translate(app.request.getLocale()).slug}) }}">{{ case.translate(app.request.getLocale()).title }}</a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </section>
                {% endif %}

                {% if lawyer.person %}

                    {% if lawyer.person.publications|length > 0 %}
                        <section class="row page__block">
                            <div class="col">
                                <div class="page__block__title">
                                    <h3 class="subsection__title">{{ 'sections.lawyers.publications'|trans }}</h3>
                                </div>
                                <div class="page__block__content">
                                    <ul class="page__block__content__details">
                                    {% for publication in lawyer.person.publications %}
                                        {% set PublicationDate = publication.getPublicationDate() |format_datetime('full', 'none', locale= app.request.getLocale() )|split(',') %}
                                        <li>
                                            <div>{{ PublicationDate[1] }}</div>
                                            <a href="#"> {{ publication.translate(app.request.getLocale()).title}}.</a>
                                        </li>
                                    {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        </section>
                    {% endif %}

                    {% if lawyer.person.events|length > 0 %}
                        <section class="row page__block">
                            <div class="col">
                                <div class="page__block__title">
                                    <h3 class="subsection__title">{{ 'sections.lawyers.events'|trans }}</h3>
                                </div>
                                <div class="page__block__content">
                                    <ul class="page__block__content__details">
                                        {% for event in lawyer.person.events %}
                                        {% set StartDate = event.getStartDate() |format_datetime('full', 'none', locale= app.request.getLocale() )|split(',') %}
                                            {% if (event.translate(app.request.getLocale()).title) %}
                                                <li>
                                                    <div>{{ StartDate[1] }}</div>
                                                    <a href="#"> {{ event.translate(app.request.getLocale()).title}}.</a>
                                                </li>
                                            {% endif %}
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        </section>
                    {% endif %}

                {% endif %}

            </div>

        </article>
    </main>

    {% include 'web/shared/call-to-action.html.twig' %}

{% endblock %}
